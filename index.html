<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>BO7 Scrims</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header class="topbar">
      <div class="topbar-left">
        <div class="logo">BO7</div>
        <nav class="nav">
          <button class="nav-link active" data-section="scrims-section">
            Scrims
          </button>
          <button class="nav-link" data-section="matches-section">
            Mes matchs
          </button>
          <button class="nav-link" disabled>8s (soon)</button>
        </nav>
      </div>
      <div class="topbar-right">
        <span id="user-email"></span>
        <button id="open-auth">Login / Inscription</button>
      </div>
    </header>

    <main class="main">
      <!-- Overlay Auth -->
      <div id="auth-overlay" class="auth-overlay">
        <div class="auth-modal">
          <div class="auth-header">
            <h2>Connexion / Inscription</h2>
            <button id="close-auth" class="close-btn">×</button>
          </div>

          <div class="auth-columns">
            <div class="section">
              <h3>Inscription</h3>
              <form id="signup-form">
                <input
                  type="email"
                  id="signup-email"
                  placeholder="Email"
                  required
                />
                <input
                  type="password"
                  id="signup-password"
                  placeholder="Mot de passe"
                  required
                />
                <button type="submit">Créer un compte</button>
              </form>
            </div>

            <div class="section">
              <h3>Connexion</h3>
              <form id="login-form">
                <input
                  type="email"
                  id="login-email"
                  placeholder="Email"
                  required
                />
                <input
                  type="password"
                  id="login-password"
                  placeholder="Mot de passe"
                  required
                />
                <button type="submit">Se connecter</button>
              </form>
              <div id="status"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- SECTION SCRIMS -->
      <section id="scrims-section" class="panel visible">
        <h1 class="page-title">Scrims & Classement</h1>

        <div class="section-grid">
          <!-- Création équipe (visible seulement si pas d'équipe) -->
          <div class="section" id="team-create-section">
            <h2>Créer une équipe</h2>
            <form id="team-form">
              <input
                type="text"
                id="team-name"
                placeholder="Nom de l'équipe"
                required
              />
              <button type="submit">Créer l'équipe</button>
            </form>
            <div id="team-status"></div>
          </div>

          <!-- Infos équipe (visible seulement si équipe existante) -->
          <div class="section" id="team-info-section" style="display: none">
            <h2>Mon équipe</h2>
            <p id="team-name-display"></p>
            <ul id="team-members"></ul>

            <button id="rename-team-btn">Renommer l'équipe</button>
            <button id="delete-team-btn">Supprimer l'équipe</button>
          </div>

          <div class="section">
            <h2>Créer un scrim</h2>
            <form id="scrim-form">
              <input type="datetime-local" id="scrim-time" required />
              <input
                type="text"
                id="scrim-mode"
                placeholder="Mode (ex: CDL BO3)"
                required
              />
              <button type="submit">Créer le scrim</button>
            </form>
            <div id="scrim-status"></div>
          </div>
        </div>

        <div class="section">
          <h2>Scrims ouverts</h2>
          <ul id="scrim-list" class="scrim-list"></ul>
        </div>

        <div class="section">
          <h2>Classement équipes</h2>
          <ol id="leaderboard"></ol>
        </div>
      </section>

      <!-- SECTION MES MATCHS -->
      <section id="matches-section" class="panel">
        <h1 class="page-title">Mes matchs</h1>

        <div class="section">
          <h2>Liste</h2>
          <ul id="my-matches"></ul>
        </div>
      </section>
    </main>

    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="app.js"></script>
  </body>
</html>
